# Интернационализация (i18n)

**Интернационализация (i18n)** — это процесс подготовки программы к работе с разными языками и локалями. В Go это особенно важно, если ваше приложение должно поддерживать **многоязычные интерфейсы, форматы дат и чисел, валюты и сортировку текста**.

---

### Основные задачи i18n

1. **Локализация текстов** — вывод сообщений на нужном языке.
2. **Форматы дат и времени** — разные страны используют разные форматы.
3. **Форматы чисел и валют** — разделители тысяч, десятичные точки, символы валют.
4. **Сортировка и сравнение строк** — разные алфавиты имеют свои правила.

---

### Работа с пакетами Go для i18n

Go предоставляет несколько библиотек для i18n, включая официальные:

* **`golang.org/x/text`** — основной пакет для работы с локалями, форматами, числами и текстом.
* **`golang.org/x/text/message`** — для форматированного вывода сообщений на разных языках.

Пример использования:

```go
import (
    "golang.org/x/text/language"
    "golang.org/x/text/message"
)

func main() {
    p := message.NewPrinter(language.English)
    p.Printf("Price: %d\n", 1234567)

    p = message.NewPrinter(language.Russian)
    p.Printf("Price: %d\n", 1234567)
}
```

* Результат под `language.English`: `Price: 1,234,567`
* Результат под `language.Russian`: `Price: 1 234 567`

> Пакет автоматически применяет **правильные разделители и форматирование** для выбранной локали.

---

### Сообщения и перевод

* Для хранения текстов используют файлы **JSON, YAML или PO/MO**, где ключ — это идентификатор сообщения, а значение — перевод.
* Пример структуры JSON для перевода:

```json
{
  "hello": {
    "en": "Hello",
    "ru": "Привет",
    "es": "Hola"
  }
}
```

* В Go можно загружать эти файлы и выбирать сообщение в зависимости от локали пользователя.

---

### Сортировка и сравнение строк

* Стандартная сортировка строк Go (`sort.Strings`) учитывает **Unicode-коды**, но не всегда правильный порядок для языка.
* Для корректной сортировки используют `golang.org/x/text/collate`:

```go
import (
    "golang.org/x/text/collate"
    "golang.org/x/text/language"
)

c := collate.New(language.Russian)
words := []string{"яблоко", "апельсин", "банан"}
c.SortStrings(words)
fmt.Println(words) // ["апельсин", "банан", "яблоко"]
```

* Collate учитывает **правила конкретного языка**, а не только Unicode-коды.

---

### Итог

* Интернационализация в Go — это **поддержка разных языков, локалей и правил форматирования**.
* Для этого используют пакеты `golang.org/x/text/message` и `collate`.
* Важно: хранить тексты отдельно от кода, использовать правильное форматирование чисел, дат и валют, и корректно сортировать строки.
* Такой подход делает приложение готовым для **многоязычных пользователей и глобального рынка**.