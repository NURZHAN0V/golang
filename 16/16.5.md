# Кросс-компиляция и сборка бинарей

Go предоставляет **удобные встроенные средства для компиляции приложений под разные операционные системы и архитектуры**. Это особенно полезно, если вы хотите распространять свое приложение как **готовый бинарный файл**, который можно запустить без установки Go.

---

### Почему Go удобен для кросс-компиляции

* Go компилирует **статически линкованные бинарные файлы**. То есть все зависимости включены в один исполняемый файл.
* Не нужно устанавливать дополнительные библиотеки на машине пользователя.
* Можно собирать приложение под Linux, Windows, macOS, ARM и другие архитектуры с **одной машины разработки**.

---

### Основные команды

1. **Простая сборка бинаря для текущей платформы:**

```bash
go build -o myapp
```

* Создаёт файл `myapp` в текущей директории.
* Можно запускать напрямую: `./myapp` (Linux/macOS) или `myapp.exe` (Windows).

---

2. **Кросс-компиляция под другую ОС или архитектуру:**

Go использует переменные окружения:

* `GOOS` — целевая операционная система (`linux`, `windows`, `darwin`).
* `GOARCH` — целевая архитектура (`amd64`, `386`, `arm`, `arm64`).

Пример для Windows на 64-бит:

```bash
GOOS=windows GOARCH=amd64 go build -o myapp.exe
```

Пример для Linux на ARM:

```bash
GOOS=linux GOARCH=arm go build -o myapp
```

> Таким образом, можно собирать бинарные файлы для всех популярных платформ **не выходя из своей ОС**.

---

### Советы по сборке

* Для уменьшения размера бинаря используют **линковку без отладочной информации**:

```bash
go build -ldflags="-s -w" -o myapp
```

* `-s` — удаляет символы отладки.

* `-w` — удаляет информацию о таблице DWARF.

* Проверяйте совместимость зависимостей. Иногда пакеты могут содержать код, специфичный для ОС.

---

### Распространение бинарей

* После сборки можно просто передавать **готовый исполняемый файл** пользователю.
* Нет необходимости в Go-рантайме на машине пользователя.
* Можно упаковать в архив или docker-контейнер для удобной доставки.

---

### Итог

* Кросс-компиляция — одно из сильных преимуществ Go.
* **GOOS** и **GOARCH** позволяют собирать приложение под любые платформы.
* **Статически линкованные бинарные файлы** делают приложение легким для распространения.
* Современный workflow: разработка → сборка бинаря → тестирование → распространение.