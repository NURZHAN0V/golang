# cgo ‚Äî –≤—ã–∑–æ–≤ C-–∫–æ–¥–∞

Go ‚Äî —ç—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π —è–∑—ã–∫, –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ C-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏** –∏–ª–∏ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π C-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

–î–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç **cgo** ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Å–º–µ—à–∏–≤–∞—Ç—å Go –∏ C-–∫–æ–¥** –≤ –æ–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ.

---

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cgo?

* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ **–≥–æ—Ç–æ–≤—ã—Ö C-–±–∏–±–ª–∏–æ—Ç–µ–∫** (–Ω–∞–ø—Ä–∏–º–µ—Ä, SQLite, OpenSSL).
* –î–æ—Å—Ç—É–ø –∫ **—Å–∏—Å—Ç–µ–º–Ω—ã–º –≤—ã–∑–æ–≤–∞–º –û–°**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ Go.
* –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å C –Ω–∞ Go.

---

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç cgo?

* –í Go-—Ñ–∞–π–ª–µ –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å **–ø—Ä–µ–∞–º–±—É–ª—É –Ω–∞ C**.
* Go-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–º–æ—â—å—é cgo –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç ¬´–ø—Ä–æ—Å–ª–æ–π–∫—É¬ª,
  —á—Ç–æ–±—ã Go –º–æ–≥ –≤—ã–∑—ã–≤–∞—Ç—å C-—Ñ—É–Ω–∫—Ü–∏–∏.

---

### –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä

```go
package main

/*
#include <stdio.h>
#include <stdlib.h>
*/
import "C"
import "unsafe"

func main() {
    msg := C.CString("Hello from C!")
    defer C.free(unsafe.Pointer(msg))

    C.printf("%s\n", msg)
}
```

üëâ –ó–¥–µ—Å—å:

* `#include` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ C.
* `C.CString` —Å–æ–∑–¥–∞—ë—Ç C-—Å—Ç—Ä–æ–∫—É.
* `C.free` –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å.
* `C.printf` ‚Äî –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π C-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

---

### –í—ã–∑–æ–≤ —Å–≤–æ–µ–π C-—Ñ—É–Ω–∫—Ü–∏–∏

–ú–æ–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ C –ø—Ä—è–º–æ –≤–Ω—É—Ç—Ä–∏ Go-–∫–æ–¥–∞:

```go
package main

/*
int add(int a, int b) {
    return a + b;
}
*/
import "C"
import "fmt"

func main() {
    res := C.add(2, 3)
    fmt.Println("2 + 3 =", res)
}
```

---

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è cgo

‚ö†Ô∏è –£ cgo –µ—Å—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

* Go-–∫–æ–¥ –∏ C-–∫–æ–¥ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–Ω—Ç–∞–π–º–∞—Ö.
* –í—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ cgo **–º–µ–¥–ª–µ–Ω–Ω–µ–µ –æ–±—ã—á–Ω–æ–≥–æ Go**.
* –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞–º—è—Ç—å—é C (–Ω–∞–ø—Ä–∏–º–µ—Ä, `C.free`).
* –ü—Ä–æ–≥—Ä–∞–º–º—ã —Å cgo —Å–ª–æ–∂–Ω–µ–µ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ.

---

### –ò—Ç–æ–≥–∏

* **cgo** –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ C –∏–∑ Go.
* –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ C-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ç–∞–∫ –∏ —Å–≤–æ–∏.
* –¢—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏: –ø–∞–º—è—Ç—å –∏ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ –Ω–µ–ª—å–∑—è –æ–±–æ–π—Ç–∏—Å—å —á–∏—Å—Ç—ã–º Go.