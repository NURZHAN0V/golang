# JSON и XML

В современных приложениях часто нужно **обрабатывать структурированные данные**. Наиболее популярные форматы — **JSON** и **XML**. Go предоставляет встроенные пакеты **`encoding/json`** и **`encoding/xml`**, чтобы удобно работать с этими форматами.

---

### JSON

* **JSON (JavaScript Object Notation)** — это легковесный формат обмена данными.
* Он читаем человеком и легко парсится программами.
* В Go JSON представляется через **структуры (`struct`)**, карты (`map`) и срезы (`slice`).

#### Пример: сериализация (структура → JSON)

```go
package main

import (
    "encoding/json"
    "fmt"
)

type User struct {
    Name  string `json:"name"`
    Email string `json:"email"`
    Age   int    `json:"age"`
}

func main() {
    u := User{Name: "Олег", Email: "oleg@example.com", Age: 25}
    data, err := json.Marshal(u) // преобразуем структуру в JSON
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println(string(data)) // {"name":"Олег","email":"oleg@example.com","age":25}
}
```

#### Пример: десериализация (JSON → структура)

```go
jsonData := []byte(`{"name":"Олег","email":"oleg@example.com","age":25}`)
var u User
err := json.Unmarshal(jsonData, &u) // преобразуем JSON в структуру
if err != nil {
    fmt.Println(err)
    return
}
fmt.Println(u.Name, u.Email, u.Age)
```

* Обратите внимание на **теги `json:"..."`**, они управляют именами полей в JSON.

---

### XML

* **XML (eXtensible Markup Language)** — более строгий и подробный формат, часто используется в старых системах и для конфигураций.
* В Go для работы с XML используется пакет **`encoding/xml`**.

#### Пример: сериализация (структура → XML)

```go
package main

import (
    "encoding/xml"
    "fmt"
)

type User struct {
    XMLName xml.Name `xml:"user"`
    Name    string   `xml:"name"`
    Email   string   `xml:"email"`
    Age     int      `xml:"age"`
}

func main() {
    u := User{Name: "Олег", Email: "oleg@example.com", Age: 25}
    data, err := xml.MarshalIndent(u, "", "  ")
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println(string(data))
}
```

* `MarshalIndent` позволяет красиво форматировать XML с отступами.

#### Пример: десериализация (XML → структура)

```go
xmlData := []byte(`
<user>
  <name>Олег</name>
  <email>oleg@example.com</email>
  <age>25</age>
</user>`)

var u User
err := xml.Unmarshal(xmlData, &u)
if err != nil {
    fmt.Println(err)
    return
}
fmt.Println(u.Name, u.Email, u.Age)
```

* В XML важно **правильно называть теги** и использовать `XMLName` для корневого элемента.

---

### Итого

* **JSON** чаще используется в современных веб-приложениях и API.
* **XML** полезен для конфигураций, интеграций со старыми системами.
* В Go работа с обоими форматами **интуитивно понятна**, через структуры, карты и срезы.
* Используйте **Marshal / Unmarshal** для конвертации между данными и текстом.