# Горутины

В Go **горутины** — это лёгкие потоки выполнения, которые позволяют **параллельно выполнять код** без сложной работы с потоками операционной системы.

Горутины — один из ключевых инструментов Go для **конкурентного программирования**.

---

### Что такое горутина

* Горутина создаётся с помощью ключевого слова `go` перед вызовом функции:

```go
func sayHello() {
    fmt.Println("Привет из горутины!")
}

func main() {
    go sayHello()  // запускаем в отдельной горутине
    fmt.Println("Привет из main")
    time.Sleep(time.Second) // ждём, чтобы горутина успела выполниться
}
```

* Вывод программы может быть разным, потому что **горутины выполняются параллельно с main**.

---

### Отличие от потоков ОС

1. Горутины **очень лёгкие**: память под стек начинается с ~2KB, и она растёт по мере необходимости.
2. Можно запускать **тысячи и десятки тысяч горутин** одновременно без сильного влияния на производительность.
3. Go **сам управляет планировкой горутин** на системные потоки, делая это прозрачным для разработчика.

---

### Горутинная конкуренция

* Горутины выполняются **асинхронно**.
* Чтобы корректно синхронизировать выполнение, используют **каналы (`chan`)** или пакеты из стандартной библиотеки (`sync`).

```go
func printNumbers() {
    for i := 1; i <= 5; i++ {
        fmt.Println(i)
        time.Sleep(100 * time.Millisecond)
    }
}

func main() {
    go printNumbers()
    go printNumbers()
    time.Sleep(time.Second) // ждём завершения обеих горутин
}
```

* В этом примере две горутины печатают числа одновременно, вывод может быть перемешанным.

---

### Горутинная лёгкость

* Обычный поток ОС требует **десятки мегабайт** памяти и значительные системные ресурсы.

* Горутины **легковесны**, создаются быстро и легко уничтожаются после завершения.

* Это позволяет Go быть **эффективным инструментом для высоконагруженных сетевых сервисов, веб-серверов и параллельных вычислений**.

---

### Итого

* **Горутина** — лёгкий параллельный поток выполнения, создаваемый через `go`.
* Они **очень быстрые и лёгкие по памяти**, что позволяет запускать тысячи горутин одновременно.
* Для управления горутинами и синхронизации используют **каналы, `sync` и другие конструкции Go**.
* Горутины — ключевой инструмент для **эффективного конкурентного программирования** в Go.