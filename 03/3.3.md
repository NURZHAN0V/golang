# 3.3 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ fuzzing

> –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–æ–¥ ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π. –≠—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–∞–Ω–∏–∫, –≥–æ–Ω–æ–∫, —É—è–∑–≤–∏–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. Go –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

## 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `govulncheck`
```bash
govulncheck ./...
```
–í—ã–≤–æ–¥–∏—Ç CVE-ID –∏ —Ñ—É–Ω–∫—Ü–∏—é-–≤—Ö–æ–¥.

## 2. Fuzzing (Go 1.18+)
```go
func FuzzJSON(f *testing.F) {
    f.Fuzz(func(t *testing.T, data []byte) {
        var m map[string]interface{}
        json.Unmarshal(data, &m)
    })
}
```
–ó–∞–ø—É—Å–∫:
```bash
go test -fuzz=FuzzJSON -fuzztime=30s
```
–ö—Ä–∞—à-–∫–µ–π—Å—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `testdata/fuzz`.

## 3. Data race detector
```bash
go test -race ./...
```
–î–ª—è –±–∏–Ω–∞—Ä–Ω–∏–∫–∞:
```bash
go run -race main.go
```

## 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–≤–æ–¥–∞: –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ª–∏–º–∏—Ç—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è
```go
r.Body = http.MaxBytesReader(w, r.Body, 1<<20) // 1 –ú–ë
```
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–∫–µ—Ç—ã `validator`, `net/mail`, `net/url`.

## 5. –ü—Ä–∏–Ω—Ü–∏–ø ¬´fail fast¬ª
```go
if err != nil {
    return fmt.Errorf("validate user: %w", err)
}
```
*–ù–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ* –Ω–µ —Å–∫—Ä—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏.

## –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è üìù
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `go test -race` –Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ `converter`. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—É—é –≥–æ–Ω–∫—É.  
2. –ù–∞–ø–∏—à–∏—Ç–µ fuzz-—Ç–µ—Å—Ç –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ `Reverse` (–∏–∑ –≥–ª–∞–≤—ã 1.9) –∏ –Ω–∞–π–¥–∏—Ç–µ —Å–ª—É—á–∞–π, –≥–¥–µ –æ–Ω–∞ –ø–∞–¥–∞–µ—Ç (–ø–æ–¥—Å–∫–∞–∑–∫–∞: –ø—É—Å—Ç–æ–π —Å—Ä–µ–∑).  
3. –° –ø–æ–º–æ—â—å—é `govulncheck` —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç CVE.
