# 3.2 Arena API –∏ —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–º—è—Ç–∏

> *Warning:* Arena API –ø–æ–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞ (proposal #51334) –∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è. –ò–¥–µ—è ‚Äî –≥—Ä—É–ø–ø–æ–≤—ã–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è –æ–¥–Ω–∏–º –≤—ã–∑–æ–≤–æ–º.

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ –∞—Ä–µ–Ω–∞
–í–º–µ—Å—Ç–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö `alloc/free` –º—ã –≤—ã–¥–µ–ª—è–µ–º –±–æ–ª—å—à–æ–π –±–ª–æ–∫, –∫–ª–∞–¥—ë–º —Ç—É–¥–∞ –æ–±—ä–µ–∫—Ç—ã –∏ –ø–æ—Ç–æ–º –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º —Å—Ä–∞–∑—É –≤–µ—Å—å –±–ª–æ–∫.

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø–ª—é—Å—ã
* –ú–µ–Ω—å—à–µ —Ä–∞–±–æ—Ç—ã GC ‚Äî –æ–±—ä–µ–∫—Ç—ã –≤ –∞—Ä–µ–Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.  
* –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –≤—Ä–µ–º—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è.

## 2. –ü—Å–µ–≤–¥–æ–∫–æ–¥ (draft API)
```go
import "arena"

func buildTree() *Node {
    a := arena.New()
    defer a.Free()

    root := arena.New[Node](a)
    root.Left = arena.New[Node](a)
    // ... —Å—Ç—Ä–æ–∏–º –¥–µ—Ä–µ–≤–æ
    return root // –í–ù–ò–ú–ê–ù–ò–ï: –Ω–µ–ª—å–∑—è –≤–µ—Ä–Ω—É—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –∑–∞ –ø—Ä–µ–¥–µ–ª—ã arena!
}
```

## 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
1. –û–±—ä–µ–∫—Ç –∏–∑ –∞—Ä–µ–Ω—ã –Ω–µ –¥–æ–ª–∂–µ–Ω –∂–∏—Ç—å –¥–æ–ª—å—à–µ –∞—Ä–µ–Ω—ã.  
2. –ù–µ–ª—å–∑—è —Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫—É –∞—Ä–µ–Ω—ã –≤–Ω—É—Ç—Ä–∏ GC-—Ö–∏–ø–∞.  
3. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–æ–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤.

## 4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —É–∂–µ —Å–µ–≥–æ–¥–Ω—è
- **sync.Pool** ‚Äî –∫–µ—à –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤.  
- **–°—Ä–µ–∑—ã-–ø–µ—Ä–µ–∑–∞–ø–∏—Å—å**: `buf = buf[:0]`.  
- **–ü—Ä–µ–ø—É–ª–∏–Ω–≥ —á–µ—Ä–µ–∑ make(capacity)`.

## –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è üìù
1. –° –ø–æ–º–æ—â—å—é `sync.Pool` —É—Å–∫–æ—Ä—å—Ç–µ –ø–∞—Ä—Å–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç —Ç—ã—Å—è—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä.  
2. –ò–∑–º–µ—Ä—å—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É heap-allocs/op —Å –∏ –±–µ–∑ –ø—É–ª–∞.
