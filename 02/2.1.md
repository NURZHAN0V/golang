# 2.1 –¢–µ—Å—Ç—ã `go test`, –±–µ–Ω—á–º–∞—Ä–∫–∏, coverage

> TDD- –∏–ª–∏ –Ω–µ TDD ‚Äì —Ä–µ—à–∞—Ç—å –≤–∞–º, –Ω–æ —É–º–µ–Ω–∏–µ –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –≤ Go must-have. –í—Å—ë –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ `go test`, –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤.

## 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞
–§–∞–π–ª –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è `_test.go`, —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî `TestXxx(t *testing.T)`.
```go
// file mathx/mul_test.go
package mathx

func TestMul(t *testing.T) {
    got := Mul(2, 3)
    if got != 6 {
        t.Errorf("Mul(2,3) = %d; want 6", got)
    }
}
```
–ó–∞–ø—É—Å–∫:
```bash
go test ./...
```
`./...` ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤—Å–µ –ø–∞–∫–µ—Ç—ã.

## 2. –¢–∞–±–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
```go
tests := []struct{
    a,b, want int
}{ {2,3,6}, {3,3,9} }
for _, tc := range tests {
    if got := Mul(tc.a, tc.b); got != tc.want {
        t.Fatalf("%d*%d = %d; want %d", tc.a, tc.b, got, tc.want)
    }
}
```

## 3. –ë–µ–Ω—á–º–∞—Ä–∫–∏
```go
func BenchmarkMul(b *testing.B) {
    for i:=0; i<b.N; i++ {
        Mul(123, 456)
    }
}
```
–ó–∞–ø—É—Å–∫:
```bash
go test -bench=.
```
–í—ã–≤–æ–¥–∏—Ç `ns/op`, `B/op`, `allocs/op`.

## 4. –ü–æ–∫—Ä—ã—Ç–∏–µ
```bash
go test -coverprofile=cover.out
```
HTML –æ—Ç—á—ë—Ç:
```bash
go tool cover -html=cover.out
```

## 5. –°–∫–µ–ª–µ—Ç –¥–ª—è –º–æ–∫–æ–≤
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã + hand-written stub –∏–ª–∏ `github.com/golang/mock`.

## –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è üìù
1. –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è `mathx.Pow2`, –¥–æ–±–∞–≤—å—Ç–µ —Å–ª—É—á–∞–π 0, 5, -3.  
2. –ò–∑–º–µ—Ä—å—Ç–µ –±–µ–Ω—á–º–∞—Ä–∫ `strings.Builder` vs `+` –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ 100 —Ä–∞–∑.  
3. –î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏—è ‚â•90% –¥–ª—è –ø–∞–∫–µ—Ç–∞ `mathx`.
