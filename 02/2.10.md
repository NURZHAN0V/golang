# 2.10 UNIX-–ø—Ä–æ—Ü–µ—Å—Å—ã –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã (`os/exec`, `syscall`)

> –ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –¥–µ—Ä–Ω—É—Ç—å –≤–Ω–µ—à–Ω—é—é —É—Ç–∏–ª–∏—Ç—É –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ —Ñ–∞–π–ª–∞. Go –º–æ–∂–µ—Ç –≤—Å—ë: –æ—Ç `exec ls` –¥–æ –ø—Ä—è–º–æ–≥–æ –≤—ã–∑–æ–≤–∞ `fork`.

## 1. –ó–∞–ø—É—Å–∫ –≤–Ω–µ—à–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã
```go
out, err := exec.Command("ls", "-l").CombinedOutput()
fmt.Println(string(out))
```
### Stream mode
```go
cmd := exec.Command("grep", "go")
cmd.Stdin = strings.NewReader("golang\npython\ngo\n")
cmd.Stdout = os.Stdout
cmd.Run()
```

## 2. –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å —Ç–∞–π–º–∞—É—Ç–æ–º
```go
ctx, cancel := context.WithTimeout(context.Background(), 2*time.Second)
 defer cancel()
cmd := exec.CommandContext(ctx, "sleep", "5")
err := cmd.Run() // –±—É–¥–µ—Ç ctx deadline exceeded
```

## 3. Signals
```go
sig := make(chan os.Signal, 1)
signal.Notify(sig, os.Interrupt)
go func(){ <-sig; fmt.Println("Ctrl+C! bye"); os.Exit(0) }()
```

## 4. –°–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã (`syscall` / `x/sys`)
```go
fd, _ := syscall.Open("file", syscall.O_RDONLY, 0)
var stat syscall.Stat_t
syscall.Fstat(fd, &stat)
```
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `golang.org/x/sys/unix`.

## 5. –ü—Ä–∞–≤–∞ –∏ –≤–ª–∞–¥–µ–ª—å—Ü—ã
```go
os.Chmod("script.sh", 0o755)
os.Chown("script.sh", uid, gid)
```

## –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è üìù
1. –ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É `psgrep`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç —Å—Ç—Ä–æ–∫–∏ `ps aux` —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç.  
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª, —Å–º–µ–Ω–∏—Ç–µ –µ–º—É –ø—Ä–∞–≤–∞ –Ω–∞ 600 –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ `stat`.  
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `ping 8.8.8.8` —Å —Ç–∞–π–º–∞—É—Ç–æ–º 3 —Å.
