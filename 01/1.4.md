# Go Modules: управление зависимостями

Когда проект на Go становится больше, появляется необходимость **подключать внешние библиотеки** и **организовывать код по пакетам**. Для этого в Go используется система **Go Modules**.

---

### Что такое Go Modules?

Go Modules — это современный способ **управления зависимостями**, появившийся начиная с Go 1.11 и ставший стандартом.

Главная цель модулей:

* Чётко определять, какие версии библиотек использует проект.
* Избавиться от старого подхода с GOPATH, который был менее гибким.
* Обеспечить повторяемость сборки проекта на любой машине.

Каждый модуль — это **папка с проектом**, содержащая файл `go.mod`, в котором указано:

* имя модуля,
* версии внешних библиотек,
* минимальная версия Go, необходимая для сборки.

---

### Инициализация модуля

Чтобы создать новый модуль, в корне проекта выполняем:

```bash
go mod init github.com/username/projectname
```

В результате создаётся файл `go.mod` примерно такого вида:

```go
module github.com/username/projectname

go 1.23
```

---

### Подключение зависимостей

Чтобы добавить библиотеку, достаточно **импортировать её в код**:

```go
import "github.com/gin-gonic/gin"
```

Затем запускаем:

```bash
go mod tidy
```

Эта команда:

* скачивает недостающие пакеты,
* удаляет неиспользуемые,
* обновляет `go.sum` — файл с контрольными суммами зависимостей.

---

### Управление версиями

Go Modules поддерживает **семантическое версионирование** (semver):

* `v1.2.3` — мажорная, минорная и патч-версия.
* Обновления библиотек можно контролировать через:

  ```bash
  go get github.com/gin-gonic/gin@v1.8.0
  ```
* Команда `go list -m all` показывает все подключённые модули и их версии.

---

### Работа с несколькими модулями

В больших проектах часто несколько модулей. Go позволяет:

* импортировать локальные модули через относительные пути,
* подключать отдельные версии библиотек для разных частей проекта.

Пример структуры проекта с несколькими модулями:

```
project/
├─ go.mod           # главный модуль
├─ api/
│  └─ go.mod        # отдельный модуль для API
├─ cli/
│  └─ go.mod        # отдельный модуль для командной строки
```

---

### Преимущества Go Modules

1. **Повторяемость сборки** — любой разработчик может собрать проект с точно такими же зависимостями.
2. **Версионирование** — легко управлять библиотеками и обновлять их.
3. **Отделение кода по пакетам** — можно делить проект на логические модули.
4. **Интеграция с `go build`, `go test`** — все команды Go автоматически учитывают модули.

---

### Итого

Go Modules делают работу с зависимостями:

* **Простой** — подключение через импорт и `go mod tidy`.
* **Надёжной** — версии и контрольные суммы исключают неожиданные ошибки.
* **Гибкой** — удобно использовать несколько модулей в больших проектах.

Теперь вы можете создавать проекты любой сложности, подключать внешние библиотеки и быть уверенными, что всё будет работать одинаково на всех машинах.